# Gaming Admin React

æ¸¸æˆå¹³å°ç®¡ç†ç³»ç»Ÿ - åŸºäº React + Webpack + Module Federation çš„å¾®å‰ç«¯æ¶æ„

## é¡¹ç›®æ¶æ„

è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨å¾®å‰ç«¯æ¶æ„çš„æ¸¸æˆå¹³å°ç®¡ç†ç³»ç»Ÿï¼Œå€Ÿé‰´äº†Nxçš„é¡¹ç›®ç»“æ„è®¾è®¡ç†å¿µï¼ŒåŸºäºä»¥ä¸‹æŠ€æœ¯æ ˆï¼š

- **âš›ï¸ React 18**: ç°ä»£Reactå¼€å‘
- **ğŸ“¦ Module Federation**: è¿è¡Œæ—¶æ¨¡å—åŠ è½½å’Œå…±äº«
- **ğŸ”§ Webpack 5**: æ¨¡å—æ‰“åŒ…å’Œæ„å»ºå·¥å…·
- **ğŸ¨ Ant Design**: ä¼ä¸šçº§UIç»„ä»¶åº“
- **ğŸ“ TypeScript**: ç±»å‹å®‰å…¨
- **ğŸ”’ è®¤è¯ç³»ç»Ÿ**: å®Œæ•´çš„ç™»å½•è®¤è¯å’ŒçŠ¶æ€ç®¡ç†
- **ğŸŒ React Query**: APIçŠ¶æ€ç®¡ç†å’Œæ•°æ®ç¼“å­˜

## é¡¹ç›®ç»“æ„

```
gaming-admin-react/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ shell/              # ğŸ  ä¸»åº”ç”¨ï¼ˆHostï¼‰- ç«¯å£4200
â”‚   â”‚   â”œâ”€â”€ src/pages/      # ğŸ“„ ç™»å½•é¡µé¢ç­‰
â”‚   â”‚   â””â”€â”€ src/fallbacks/  # ğŸ›¡ï¸ å¾®å‰ç«¯é™çº§ç»„ä»¶
â”‚   â”œâ”€â”€ user-report/        # ğŸ“Š ç”¨æˆ·æŠ¥å‘Šç®¡ç† - ç«¯å£4201  
â”‚   â”œâ”€â”€ user-transaction/   # ğŸ’° ç”¨æˆ·äº¤æ˜“ç®¡ç† - ç«¯å£4202
â”‚   â”œâ”€â”€ user-profile/       # ğŸ‘¤ ç”¨æˆ·æ¡£æ¡ˆç®¡ç† - ç«¯å£4203
â”‚   â”œâ”€â”€ app-user/          # ğŸ“± åº”ç”¨ç”¨æˆ·ç®¡ç† - ç«¯å£4204
â”‚   â””â”€â”€ user-avatar/       # ğŸ–¼ï¸ ç”¨æˆ·å¤´åƒç®¡ç† - ç«¯å£4205 (æš‚æ—¶ç§»é™¤)
â”œâ”€â”€ libs/
â”‚   â””â”€â”€ shared/
â”‚       â”œâ”€â”€ ui/            # ğŸ¨ å…±äº«UIç»„ä»¶åº“
â”‚       â”‚   â”œâ”€â”€ components/  # åŸºç¡€ç»„ä»¶(Layoutã€UserAvatarç­‰)
â”‚       â”‚   â”œâ”€â”€ contexts/    # React Context(AuthContextç­‰)
â”‚       â”‚   â””â”€â”€ providers/   # å…¨å±€Provider(QueryProviderç­‰)
â”‚       â”œâ”€â”€ utils/         # ğŸ› ï¸ å…±äº«å·¥å…·åº“
â”‚       â”‚   â”œâ”€â”€ api/        # APIè¯·æ±‚å°è£…(BaseApiã€ApiHeaderFactory)
â”‚       â”‚   â”œâ”€â”€ auth/       # è®¤è¯ç›¸å…³(AuthStorageç­‰)
â”‚       â”‚   â”œâ”€â”€ hooks/      # React Hooks(useApiRequestç­‰)
â”‚       â”‚   â””â”€â”€ constants/  # å¸¸é‡é…ç½®(AppConfigç­‰)
â”‚       â””â”€â”€ types/         # ğŸ“‹ å…±äº«ç±»å‹å®šä¹‰
â””â”€â”€ scripts/               # ğŸ”§ æ„å»ºè„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm 8+

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨ä¸»åº”ç”¨
npm run serve:shell

# å¯åŠ¨å„ä¸ªå¾®åº”ç”¨
npm run serve:report        # ç”¨æˆ·æŠ¥å‘Š
npm run serve:transaction   # ç”¨æˆ·äº¤æ˜“  
npm run serve:profile       # ç”¨æˆ·æ¡£æ¡ˆ
npm run serve:app-user      # åº”ç”¨ç”¨æˆ·
# npm run serve:avatar      # ç”¨æˆ·å¤´åƒ (æš‚æ—¶ç§»é™¤)

# åŒæ—¶å¯åŠ¨æ‰€æœ‰åº”ç”¨
npm run serve:all
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®
```bash
# è®¾ç½®APIåŸŸåç¯å¢ƒå˜é‡
export REACT_APP_API_DOMAIN=https://admin.laiwan.io/admin/

# æˆ–ä½¿ç”¨.envæ–‡ä»¶é…ç½®
echo "REACT_APP_API_DOMAIN=https://admin.laiwan.io/admin/" > .env.production
```

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ”’ è®¤è¯ç³»ç»Ÿ
- ç»Ÿä¸€ç™»å½•é¡µé¢ (`/login`)
- JWTä»¤ç‰Œç®¡ç†
- è‡ªåŠ¨ç™»å½•çŠ¶æ€æŒä¹…åŒ–
- 401é”™è¯¯å¤„ç†å’Œé‡å®šå‘
- è·¯ç”±æƒé™å®ˆå«

### ğŸ¨ é»˜è®¤å¤´åƒç³»ç»Ÿ
- æ™ºèƒ½å¤´åƒç»„ä»¶ `UserAvatar`
- CSSçº¯ä»£ç å®ç°çš„æ¶é­”é»˜è®¤å¤´åƒ
- è‡ªåŠ¨é™çº§æ˜¾ç¤ºæœºåˆ¶
- ç»Ÿä¸€çš„å¤´åƒç®¡ç†

### ğŸ“Š å¾®å‰ç«¯æ¨¡å—
- **ç”¨æˆ·æŠ¥å‘Š**: æ•°æ®ç»Ÿè®¡å’ŒæŠ¥å‘Šå±•ç¤º
- **ç”¨æˆ·äº¤æ˜“**: é’±åŒ…ç®¡ç†å’Œäº¤æ˜“è®°å½•
- **ç”¨æˆ·æ¡£æ¡ˆ**: åŸºç¡€ä¿¡æ¯å’Œèµ„æ–™ç®¡ç†  
- **åº”ç”¨ç”¨æˆ·**: ç”¨æˆ·æƒé™å’Œè®¾ç½®ç®¡ç†

## ğŸ”§ å¯ç”¨è„šæœ¬

### å¯åŠ¨æœåŠ¡
- `npm start` - å¯åŠ¨Shellä¸»åº”ç”¨
- `npm run serve:shell` - å¯åŠ¨Shellä¸»åº”ç”¨ (ç«¯å£4200)
- `npm run serve:report` - å¯åŠ¨ç”¨æˆ·æŠ¥å‘Šå¾®åº”ç”¨ (ç«¯å£4201)
- `npm run serve:transaction` - å¯åŠ¨ç”¨æˆ·äº¤æ˜“å¾®åº”ç”¨ (ç«¯å£4202)
- `npm run serve:profile` - å¯åŠ¨ç”¨æˆ·æ¡£æ¡ˆå¾®åº”ç”¨ (ç«¯å£4203)
- `npm run serve:app-user` - å¯åŠ¨åº”ç”¨ç”¨æˆ·å¾®åº”ç”¨ (ç«¯å£4204)
- `npm run serve:all` - åŒæ—¶å¯åŠ¨æ‰€æœ‰åº”ç”¨

### æ„å»ºéƒ¨ç½²
- `npm run build` - æ„å»ºæ‰€æœ‰åº”ç”¨
- `npm run build:parallel` - å¹¶è¡Œæ„å»ºæ‰€æœ‰åº”ç”¨(æ›´å¿«)
- `npm run clean` - æ¸…ç†æ„å»ºäº§ç‰©

### ä»£ç è´¨é‡
- `npm run lint` - ä»£ç æ£€æŸ¥
- `npm run typecheck` - TypeScriptç±»å‹æ£€æŸ¥

## ğŸ—ï¸ å¾®å‰ç«¯ç‰¹æ€§

### Hoståº”ç”¨ (Shell)
- ğŸ  ç»Ÿä¸€çš„åº”ç”¨å…¥å£å’Œè·¯ç”±ç®¡ç†
- ğŸ›¡ï¸ é”™è¯¯è¾¹ç•Œå’Œé™çº§å¤„ç†  
- ğŸ”„ åŠ¨æ€æ¨¡å—åŠ è½½
- ğŸ“± å“åº”å¼å¸ƒå±€æ¡†æ¶
- ğŸ”’ å®Œæ•´çš„ç™»å½•è®¤è¯ç³»ç»Ÿ
- ğŸ¨ é»˜è®¤å¤´åƒç³»ç»Ÿ(æ¶é­”è®¾è®¡)

### Remoteåº”ç”¨
- ğŸ“Š **User Report**: ç”¨æˆ·æŠ¥å‘Šå’Œæ•°æ®åˆ†æ
- ğŸ’° **User Transaction**: ç”¨æˆ·äº¤æ˜“å’Œé’±åŒ…ç®¡ç†  
- ğŸ‘¤ **User Profile**: ç”¨æˆ·æ¡£æ¡ˆå’ŒåŸºç¡€ä¿¡æ¯ç®¡ç†
- ğŸ“± **App User**: åº”ç”¨ç”¨æˆ·ç®¡ç†
- ğŸ–¼ï¸ **User Avatar**: ç”¨æˆ·å¤´åƒç®¡ç† (æš‚æ—¶ç§»é™¤)

### å…±äº«åº“
- ğŸ¨ **Shared UI**: ç»Ÿä¸€çš„UIç»„ä»¶åº“
  - `Layout` - é¡µé¢å¸ƒå±€ç»„ä»¶
  - `UserAvatar` - æ™ºèƒ½å¤´åƒç»„ä»¶(æ”¯æŒé»˜è®¤å¤´åƒ)
  - `AuthRoute` - è®¤è¯è·¯ç”±å®ˆå«
  - `AuthContext` - è®¤è¯çŠ¶æ€ç®¡ç†
- ğŸ› ï¸ **Shared Utils**: é€šç”¨å·¥å…·å’ŒAPIå°è£…
  - `BaseApi` - ç»Ÿä¸€APIè¯·æ±‚åŸºç±»
  - `AuthStorage` - ä»¤ç‰Œå­˜å‚¨ç®¡ç†
  - `useApiRequest` - APIè¯·æ±‚Hook
- ğŸ“‹ **Shared Types**: TypeScriptç±»å‹å®šä¹‰

## ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹

### Module Federationé…ç½®
- âœ… è¿è¡Œæ—¶ä¾èµ–å…±äº«
- âœ… ç‹¬ç«‹éƒ¨ç½²èƒ½åŠ›
- âœ… æ¸è¿›å¼åŠ è½½
- âœ… ç‰ˆæœ¬éš”ç¦»
- âœ… é”™è¯¯é™çº§å¤„ç†

### è®¤è¯ä¸çŠ¶æ€ç®¡ç†
- ğŸ”’ JWTä»¤ç‰Œè®¤è¯
- ğŸŒ React Query + Contextæ¨¡å¼
- ğŸ’¾ æœ¬åœ°å­˜å‚¨çŠ¶æ€æŒä¹…åŒ–
- ğŸ”„ è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- ğŸ›¡ï¸ è·¯ç”±æƒé™å®ˆå«

### å¼€å‘ä½“éªŒ
- ğŸš€ HMRçƒ­æ›´æ–°æ”¯æŒ
- ğŸ” TypeScriptæ™ºèƒ½æç¤º
- ğŸ¯ æŒ‰éœ€åŠ è½½å’Œä»£ç åˆ†å‰²
- ğŸ”§ è‡ªå®šä¹‰æ„å»ºè„šæœ¬
- ğŸ¨ ç»Ÿä¸€UIç»„ä»¶ç³»ç»Ÿ

### ç”Ÿäº§ä¼˜åŒ–
- ğŸ“¦ Bundleåˆ†æå’Œä¼˜åŒ–
- ğŸ—œï¸ ä»£ç å‹ç¼©å’ŒTree Shaking
- ğŸ’¾ æ™ºèƒ½ç¼“å­˜ç­–ç•¥
- ğŸŒ CDNå‹å¥½éƒ¨ç½²
- ğŸ“Š APIè¯·æ±‚ä¼˜åŒ–

## ğŸš€ éƒ¨ç½²

### ç”Ÿäº§æ„å»º
```bash
# ç”Ÿäº§æ„å»º
npm run build

# æˆ–è€…å¹¶è¡Œæ„å»ºï¼ˆæ›´å¿«ï¼‰
npm run build:parallel
```

### éƒ¨ç½²ç»“æ„
æ„å»ºåçš„æ–‡ä»¶ä½äº `dist/` ç›®å½•ï¼š
- `dist/apps/shell/` - ä¸»åº”ç”¨æ„å»ºäº§ç‰©
- `dist/apps/user-report/` - ç”¨æˆ·æŠ¥å‘Šåº”ç”¨æ„å»ºäº§ç‰©  
- `dist/apps/user-transaction/` - ç”¨æˆ·äº¤æ˜“åº”ç”¨æ„å»ºäº§ç‰©
- `dist/apps/user-profile/` - ç”¨æˆ·æ¡£æ¡ˆåº”ç”¨æ„å»ºäº§ç‰©
- `dist/apps/app-user/` - åº”ç”¨ç”¨æˆ·åº”ç”¨æ„å»ºäº§ç‰©

### ä»“åº“å¯¹åº”å…³ç³»
æ¯ä¸ªåº”ç”¨å¯¹åº”ç‹¬ç«‹ä»“åº“ï¼Œå¯ä»¥ç‹¬ç«‹éƒ¨ç½²åˆ°ä¸åŒçš„åŸŸåæˆ–è·¯å¾„ä¸‹ï¼š

- `user_report_admin_react` â†’ `apps/user-report`
- `user_transaction_admin_react` â†’ `apps/user-transaction`
- `user_profile_admin_react` â†’ `apps/user-profile`
- `app_user_admin_react` â†’ `apps/app-user`

### ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env.production` æ–‡ä»¶ï¼š
```bash
# APIæœåŠ¡å™¨åŸŸå
REACT_APP_API_DOMAIN=https://admin.laiwan.io/admin/

# åº”ç”¨åç§°
REACT_APP_NAME=Gaming Admin

# åº”ç”¨ç‰ˆæœ¬
REACT_APP_VERSION=1.0.0
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Federation Runtime é”™è¯¯**
   ```bash
   # æ£€æŸ¥æ‰€æœ‰å¾®å‰ç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
   npm run serve:all
   ```

2. **APIè¯·æ±‚å¤±è´¥**
   ```bash
   # ç¡®è®¤APIåŸŸåé…ç½®æ­£ç¡®
   echo $REACT_APP_API_DOMAIN
   ```

3. **ç™»å½•è®¤è¯é—®é¢˜**
   - æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„è®¤è¯ä»¤ç‰Œ
   - ç¡®è®¤APIè¿”å›çš„tokenå­—æ®µåç§°

4. **é»˜è®¤å¤´åƒä¸æ˜¾ç¤º**
   - ç¡®è®¤ä½¿ç”¨ `UserAvatar` ç»„ä»¶è€Œä¸æ˜¯ `Avatar`
   - æ£€æŸ¥ `src` å±æ€§ä¸ºç©ºæˆ–nullæ—¶çš„é™çº§é€»è¾‘

## ğŸ¤ è´¡çŒ®

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License